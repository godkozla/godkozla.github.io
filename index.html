<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, user-scalable=yes"
  />
  <title>.lottie responsive</title>
  <style>
    :root { --bg: #fff; --ratio: 1 / 1; } /* поменяй ratio на 16/9, 9/16 и т.п. */

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
    }

    /* Контейнер растягивается на всю ширину экрана и держит пропорции */
    .lottie-container {
      width: 100vw;
      aspect-ratio: var(--ratio);
      position: relative;
      margin: 0 auto;           /* центр по горизонтали */
      touch-action: manipulation;/* не блокируем жесты */
    }

    canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
    }
  </style>
</head>
<body>
  <div class="lottie-container">
    <canvas id="canvas"></canvas>
  </div>

  <script type="module">
    import { DotLottie } from "https://cdn.jsdelivr.net/npm/@lottiefiles/dotlottie-web/+esm";

    const container = document.querySelector(".lottie-container");
    const canvas = document.getElementById("canvas");

    // Инициализация плеера
    const player = new DotLottie({
      canvas,
      src: "./animation.lottie",
      autoplay: true,
      loop: true,
      renderer: "canvas" // можно "svg", если нужно
    });

    // Функция подгонки под контейнер с учётом DPR (чтобы не было мыла)
    function fitToContainer() {
      const dpr = window.devicePixelRatio || 1;
      const rect = container.getBoundingClientRect();
      canvas.width  = Math.max(1, Math.round(rect.width  * dpr));
      canvas.height = Math.max(1, Math.round(rect.height * dpr));
    }

    // Следим за любыми изменениями размеров контейнера (ориентация, UI-бары, адресная строка и т.д.)
    const ro = new ResizeObserver(fitToContainer);
    ro.observe(container);

    // На старте и после готовности тоже синхронизируем
    fitToContainer();
    player.addEventListener("ready", fitToContainer);
  </script>
</body>
</html>
